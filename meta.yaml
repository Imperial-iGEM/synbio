# made with inspiration from: https://github.com/fastai/fastai/blob/master/conda/meta.yaml

{% set data = load_setup_py_data(setup_file='./setup.py', from_recipe_dir=True) %}

package:
  name: "{{ data.name }}"
  version: "{{ data.version }}"

source:
  url: ./dist/{{ data.name }}-{{ data.version }}.tar.gz

build:
  number: 0
  script: python setup.py install --single-version-externally-managed --record=record.txt

requirements:
  host:
    - python >=3.0
    - pip
  run:
    - python >=3.0
    - biopython >=1.74
    - networkx >=2.3
    - primer3-py

test:
  files:
    - data
    - tests
  imports:
    - synbio
    - synbio.designs
    - synbio.protocols
  commands:
    - python3 -m unittest discover tests -p '*_test.py'

about:
  home: {{ data.get('url') }}
  license: {{ data['license'] }}
  license_family: "GPL2"
  license_file: "LICENSE"
  summary: {{ data['description'] }}
  doc_url: https://lattice-automation.github.io/synbio/html/index.html
  dev_url: https://github.com/Lattice-Automation/synbio

extra:
  recipe-maintainers:
    - 'JJTimmons'
  deploy:
    - anaconda-client
    - setuptools
    - twine